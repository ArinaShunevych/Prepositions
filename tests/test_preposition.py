import pytest
from language.preposition import extract_prepositions

def test_case_1():
    text = (
        "Поперед будинком виднілися високі дерева. Попід старими дубами лежали великі камені. Згідно з планом, тут мала бути нова дорога. Довкола ділянки натягнули стрічку. Поблизу стояли будівельні машини. Внаслідок зсуву ґрунту роботи тимчасово призупинили. Навколо місця працювали охоронці."
    )
    expected = [
        ("поперед", "відприслівникові", "разом"),
        ("попід", "вторинні", "разом"),
        ("згідно з", "відприслівникові", "окремо"),
        ("довкола", "відприслівникові", "разом"),
        ("внаслідок", "відприслівникові", "разом"),
        ("навколо", "відприслівникові", "разом"),
    ]
    result = extract_prepositions(text)
    assert result == expected

def test_case_2():
    text = (
        "У напрямі до міста виднілися новобудови. Відповідно до вказівок, усе було виконано точно. На шляху до місця зустрічі вони зупинилися для відпочинку. У зв’язку з погодними умовами подію перенесли. Близько опівдня все було завершено. Під час роботи було дотримано всіх правил. У результаті вони досягли успіху."
    )
    expected = [
        ("у напрямі до", "відіменникові", "окремо"),
        ("відповідно до", "відприслівникові", "окремо"),
        ("на шляху до", "відіменникові", "окремо"),
        ("у зв’язку з", "відіменникові", "окремо"),
        ("близько", "відприслівникові", "разом"),
        ("під час", "відіменникові", "окремо"),
        ("у результаті", "відіменникові", "окремо"),
    ]
    result = extract_prepositions(text)
    assert result == expected

def test_case_3():
    text = (
        "Незважаючи на труднощі, він завершив роботу вчасно. Завдяки підтримці команди проект був реалізований успішно. З-за річки долинали звуки музики. Край дороги стояла невелика капличка. З-під землі били джерела. Поблизу знаходився невеликий парк. Услід за ними вирушили туристи."
    )
    expected = [
        ("незважаючи на", "віддієслівні", "окремо"),
        ("завдяки", "віддієслівні", "разом"),
        ("з-за", "вторинні", "через дефіс"),
        ("край", "відіменникові", "разом"),
        ("з-під", "вторинні", "через дефіс"),
        ("поблизу", "відприслівникові", "разом"),
        ("услід", "відприслівникові", "разом"),
    ]
    result = extract_prepositions(text)
    assert result == expected

def test_case_4():
    text = (
        "Навпроти будинку розташувався великий магазин. Наприкінці вулиці був красивий фонтан. Під час святкування виступали кілька оркестрів. За допомогою нових технологій роботу вдалося оптимізувати. Заради успіху він працював без вихідних. Довкола площі були розташовані клумби. Напередодні свят була проведена генеральна репетиція."
    )
    expected = [
        ("навпроти", "відприслівникові", "разом"),
        ("наприкінці", "відприслівникові", "разом"),
        ("під час", "відіменникові", "окремо"),
        ("за допомогою", "відіменникові", "окремо"),
        ("заради", "вторинні", "разом"),
        ("довкола", "відприслівникові", "разом"),
        ("напередодні", "відприслівникові", "разом"),
    ]
    result = extract_prepositions(text)
    assert result == expected

def test_case_5():
    text = (
        "В силу обставин їм довелося змінити маршрут. У результаті їхній план став більш ефективним. Шляхом аналізу вони знайшли найкраще рішення. Навкруги були розкидані уламки старих будівель. Відповідно до умов договору всі сторони дотрималися своїх обов’язків. На шляху до перемоги вони подолали багато перешкод. У зв’язку з цим було прийнято нову стратегію."
    )
    expected = [
        ("в силу", "відіменникові", "окремо"),
        ("у результаті", "відіменникові", "окремо"),
        ("шляхом", "відіменникові", "разом"),
        ("навкруги", "відприслівникові", "разом"),
        ("відповідно до", "відприслівникові", "окремо"),
        ("на шляху до", "відіменникові", "окремо"),
        ("у зв’язку з", "відіменникові", "окремо"),
    ]
    result = extract_prepositions(text)
    assert result == expected
